{
  "active": true,
  "connections": {
    "Webhook Login": {
      "main": [
        [
          {
            "node": "Validar Input Login",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Validar Input Login": {
      "main": [
        [
          {
            "node": "Input Válido?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Input Válido?": {
      "main": [
        [
          {
            "node": "Buscar Usuário",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Response Validation Error",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Buscar Usuário": {
      "main": [
        [
          {
            "node": "Usuário Existe?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Usuário Existe?": {
      "main": [
        [
          {
            "node": "Validar Senha Postgres",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Response Login Error",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Validar Senha Postgres": {
      "main": [
        [
          {
            "node": "Processar Validação",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Processar Validação": {
      "main": [
        [
          {
            "node": "Senha Válida?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Senha Válida?": {
      "main": [
        [
          {
            "node": "Gerar JTIs e Timestamps",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Response Login Error",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Gerar JTIs e Timestamps": {
      "main": [
        [
          {
            "node": "Criar JWT Payloads",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Criar JWT Payloads": {
      "main": [
        [
          {
            "node": "Assinar Tokens JWT",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Assinar Tokens JWT": {
      "main": [
        [
          {
            "node": "Formatar Tokens",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Formatar Tokens": {
      "main": [
        [
          {
            "node": "Criar Sessão",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Criar Sessão": {
      "main": [
        [
          {
            "node": "Response Login Success",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Webhook Criar Cliente": {
      "main": [
        [
          {
            "node": "Middleware Auth Simples",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Middleware Auth Simples": {
      "main": [
        [
          {
            "node": "Autenticado?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Autenticado?": {
      "main": [
        [
          {
            "node": "Validar Input Cliente",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Response Auth Error",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Validar Input Cliente": {
      "main": [
        [
          {
            "node": "Input Válido?1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Preparar Dados": {
      "main": [
        [
          {
            "node": "Inserir Cliente",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Inserir Cliente": {
      "main": [
        [
          {
            "node": "Response Cliente Success",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Input Válido?1": {
      "main": [
        [
          {
            "node": "Preparar Dados",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Response Validation Error1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "createdAt": "2025-12-29T18:46:22.712Z",
  "id": "kn4R5u4cwcW9mh5t",
  "isArchived": false,
  "meta": null,
  "name": "Backend-credGestor-FINAL",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "auth/login",
        "responseMode": "responseNode",
        "options": {}
      },
      "id": "9e0cc16d-5083-4a1d-9edc-7bdf690c1758",
      "name": "Webhook Login",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        -1600,
        304
      ],
      "webhookId": "auth-login"
    },
    {
      "parameters": {
        "jsCode": "const body = $json.body ?? {};\nconst errors = [];\n\nif (!body.email || typeof body.email !== 'string' || !body.email.includes('@')) {\n  errors.push('email é obrigatório e deve ser válido');\n}\n\nif (!body.senha || typeof body.senha !== 'string' || body.senha.length < 6) {\n  errors.push('senha é obrigatória e deve ter no mínimo 6 caracteres');\n}\n\nreturn [{\n  json: {\n    valido: errors.length === 0,\n    erro: errors.length ? 'Validação falhou' : null,\n    detalhes: errors,\n    input: {\n      email: body.email,\n      senha_fornecida: body.senha\n    }\n  }\n}];"
      },
      "id": "8fd1af9e-eeca-4e8d-ba8c-49a7df19807c",
      "name": "Validar Input Login",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -1408,
        304
      ]
    },
    {
      "parameters": {
        "conditions": {
          "boolean": [
            {
              "value1": "={{ $json.valido }}",
              "value2": true
            }
          ]
        }
      },
      "id": "f233f673-5089-4bc7-b8f3-5c3a479dc206",
      "name": "Input Válido?",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        -1200,
        304
      ]
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ $json }}",
        "options": {}
      },
      "id": "b8fc52fb-3d34-42d5-9804-20e1533ae2ed",
      "name": "Response Validation Error",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1,
      "position": [
        -1008,
        464
      ]
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "SELECT \n  tu.id,\n  tu.tenant_id,\n  tu.email,\n  tu.password_hash,\n  tu.role,\n  tu.ativo,\n  t.nome as tenant_nome\nFROM public.tenant_users tu\nINNER JOIN public.tenants t ON t.id = tu.tenant_id\nWHERE tu.email = $1\n  AND tu.ativo = true\nLIMIT 1;",
        "options": {
          "queryReplacement": "={{ $items('Webhook Login')[0].json.body.email }}"
        }
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        -1008,
        208
      ],
      "id": "50b37e24-508b-4a14-9587-0905cdc972de",
      "name": "Buscar Usuário",
      "credentials": {
        "postgres": {
          "id": "ISeq8ovLtFz7Vb1t",
          "name": "Postgres CredGestor"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "number": [
            {
              "value1": "={{ $items().length }}",
              "operation": "larger"
            }
          ]
        }
      },
      "id": "f1a67ed7-796e-4528-a100-74fd8042d4a7",
      "name": "Usuário Existe?",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        -800,
        208
      ]
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ {\n  erro: 'CREDENCIAIS_INVALIDAS',\n  mensagem: 'Email ou senha incorretos',\n  timestamp: new Date().toISOString()\n} }}",
        "options": {}
      },
      "id": "58550bac-7faf-462e-a293-82a6c6002875",
      "name": "Response Login Error",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1,
      "position": [
        -608,
        352
      ]
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "SELECT validar_senha_bcrypt($1, $2) as senha_valida;",
        "options": {
          "queryReplacement": "={{ $items('Webhook Login')[0].json.body.senha }}\n={{ $json.password_hash }}"
        }
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        -608,
        112
      ],
      "id": "2763417d-0190-4f2a-ad70-0b68e41c74f9",
      "name": "Validar Senha Postgres",
      "credentials": {
        "postgres": {
          "id": "ISeq8ovLtFz7Vb1t",
          "name": "Postgres CredGestor"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// Processar validação\nconst senhaValida = $json.senha_valida;\nconst usuario = $items('Buscar Usuário')[0].json;\n\nif (!senhaValida) {\n  return [{\n    json: {\n      autenticado: false,\n      senha_valida: false\n    }\n  }];\n}\n\nreturn [{\n  json: {\n    autenticado: true,\n    senha_valida: true,\n    usuario: {\n      id: usuario.id,\n      email: usuario.email,\n      tenant_id: usuario.tenant_id,\n      tenant_nome: usuario.tenant_nome,\n      role: usuario.role\n    }\n  }\n}];"
      },
      "id": "36fa4542-15e2-46de-9c06-707b8b8b8696",
      "name": "Processar Validação",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -400,
        112
      ]
    },
    {
      "parameters": {
        "conditions": {
          "boolean": [
            {
              "value1": "={{ $json.senha_valida }}",
              "value2": true
            }
          ]
        }
      },
      "id": "900b8bee-07df-4940-9281-fb8b2745e7d6",
      "name": "Senha Válida?",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        -208,
        112
      ]
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "-- Gerar tokens JWT no Postgres\nSELECT \n  gen_random_uuid() as access_jti,\n  gen_random_uuid() as refresh_jti,\n  extract(epoch from now())::bigint as iat,\n  extract(epoch from now() + interval '15 minutes')::bigint as access_exp,\n  extract(epoch from now() + interval '7 days')::bigint as refresh_exp;",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        0,
        0
      ],
      "id": "a0a48a46-92aa-42a0-b26a-48c983bf9419",
      "name": "Gerar JTIs e Timestamps",
      "credentials": {
        "postgres": {
          "id": "ISeq8ovLtFz7Vb1t",
          "name": "Postgres CredGestor"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// Criar payloads JWT (SEM crypto, apenas base64)\nconst usuario = $items('Processar Validação')[0].json.usuario;\nconst jwtData = $json;\n\n// Header JWT fixo\nconst header = {alg: 'HS256', typ: 'JWT'};\n\n// Access token payload\nconst accessPayload = {\n  sub: usuario.id,\n  email: usuario.email,\n  tenant_id: usuario.tenant_id,\n  role: usuario.role,\n  type: 'access',\n  jti: jwtData.access_jti,\n  iat: jwtData.iat,\n  exp: jwtData.access_exp\n};\n\n// Refresh token payload\nconst refreshPayload = {\n  sub: usuario.id,\n  tenant_id: usuario.tenant_id,\n  type: 'refresh',\n  jti: jwtData.refresh_jti,\n  iat: jwtData.iat,\n  exp: jwtData.refresh_exp\n};\n\n// Criar tokens \"mock\" (sem assinatura real - apenas para estrutura)\n// A assinatura real será feita no Postgres\nfunction base64url(obj) {\n  return Buffer.from(JSON.stringify(obj))\n    .toString('base64')\n    .replace(/\\+/g, '-')\n    .replace(/\\//g, '_')\n    .replace(/=/g, '');\n}\n\nconst accessTokenUnsigned = base64url(header) + '.' + base64url(accessPayload);\nconst refreshTokenUnsigned = base64url(header) + '.' + base64url(refreshPayload);\n\nreturn [{\n  json: {\n    usuario: usuario,\n    access_token_unsigned: accessTokenUnsigned,\n    refresh_token_unsigned: refreshTokenUnsigned,\n    access_payload: accessPayload,\n    refresh_payload: refreshPayload,\n    access_jti: jwtData.access_jti,\n    refresh_jti: jwtData.refresh_jti,\n    expires_at: new Date(jwtData.access_exp * 1000).toISOString(),\n    refresh_expires_at: new Date(jwtData.refresh_exp * 1000).toISOString()\n  }\n}];"
      },
      "id": "7ec7dd6f-80ac-4774-a9c0-11e587ca290a",
      "name": "Criar JWT Payloads",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        208,
        0
      ]
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "-- Assinar tokens usando pgcrypto\nSELECT \n  $1 || '.' || encode(hmac($1, $3, 'sha256'), 'base64') as access_token_signed,\n  $2 || '.' || encode(hmac($2, $3, 'sha256'), 'base64') as refresh_token_signed;",
        "options": {
          "queryReplacement": "={{ $json.access_token_unsigned }}\n={{ $json.refresh_token_unsigned }}\n={{ $env.JWT_SECRET || 'YOUR_SECRET_KEY_CHANGE_ME' }}"
        }
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        400,
        0
      ],
      "id": "ae327f25-bd0b-4f0a-9dac-ca3692428cd2",
      "name": "Assinar Tokens JWT",
      "credentials": {
        "postgres": {
          "id": "ISeq8ovLtFz7Vb1t",
          "name": "Postgres CredGestor"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// Limpar assinatura base64url\nfunction cleanBase64url(str) {\n  return str.replace(/\\+/g, '-').replace(/\\//g, '_').replace(/=/g, '');\n}\n\nconst tokens = $json;\nconst payloadData = $items('Criar JWT Payloads')[0].json;\n\nreturn [{\n  json: {\n    usuario: payloadData.usuario,\n    access_token: cleanBase64url(tokens.access_token_signed),\n    refresh_token: cleanBase64url(tokens.refresh_token_signed),\n    access_jti: payloadData.access_jti,\n    refresh_jti: payloadData.refresh_jti,\n    expires_at: payloadData.expires_at,\n    refresh_expires_at: payloadData.refresh_expires_at\n  }\n}];"
      },
      "id": "3ee30c43-9975-49fc-9301-1e2d6473ffe1",
      "name": "Formatar Tokens",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        608,
        0
      ]
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "INSERT INTO public.user_sessions (\n  id,\n  user_id,\n  tenant_id,\n  access_token,\n  refresh_token,\n  access_jti,\n  refresh_jti,\n  expires_at,\n  refresh_expires_at,\n  ip_address,\n  user_agent,\n  revogado\n)\nVALUES (\n  gen_random_uuid(),\n  $1::uuid,\n  $2::uuid,\n  $3,\n  $4,\n  $5::uuid,\n  $6::uuid,\n  $7::timestamp,\n  $8::timestamp,\n  $9,\n  $10,\n  false\n)\nRETURNING id, created_at;",
        "options": {
          "queryReplacement": "={{ $json.usuario.id }}\n={{ $json.usuario.tenant_id }}\n={{ $json.access_token }}\n={{ $json.refresh_token }}\n={{ $json.access_jti }}\n={{ $json.refresh_jti }}\n={{ $json.expires_at }}\n={{ $json.refresh_expires_at }}\n={{ $items('Webhook Login')[0].json.headers['x-forwarded-for'] || 'unknown' }}\n={{ $items('Webhook Login')[0].json.headers['user-agent'] || 'unknown' }}"
        }
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        800,
        0
      ],
      "id": "c3e42c60-54cb-47ef-84d1-d9283b37f5c2",
      "name": "Criar Sessão",
      "credentials": {
        "postgres": {
          "id": "ISeq8ovLtFz7Vb1t",
          "name": "Postgres CredGestor"
        }
      }
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ {\n  sucesso: true,\n  access_token: $('Formatar Tokens').item.json.access_token,\n  refresh_token: $('Formatar Tokens').item.json.refresh_token,\n  token_type: 'Bearer',\n  expires_in: 900,\n  usuario: {\n    id: $('Formatar Tokens').item.json.usuario.id,\n    email: $('Formatar Tokens').item.json.usuario.email,\n    tenant_id: $('Formatar Tokens').item.json.usuario.tenant_id,\n    tenant_nome: $('Formatar Tokens').item.json.usuario.tenant_nome,\n    role: $('Formatar Tokens').item.json.usuario.role\n  },\n  timestamp: new Date().toISOString()\n} }}",
        "options": {}
      },
      "id": "34fc217b-edc0-4efa-9b95-8ce60d892150",
      "name": "Response Login Success",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1,
      "position": [
        1008,
        0
      ]
    },
    {
      "parameters": {
        "content": "## Login\n**Double click** to edit me. [Guide](https://docs.n8n.io/workflows/sticky-notes/)",
        "height": 656,
        "width": 2976
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -1712,
        -48
      ],
      "id": "a7c6e0c4-297c-4779-9b95-ef3f7b0fd4b7",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "clientes",
        "responseMode": "responseNode",
        "options": {}
      },
      "id": "02b8ace5-792e-406d-b389-f557894b58e2",
      "name": "Webhook Criar Cliente",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        -1616,
        1280
      ],
      "webhookId": "criar-cliente"
    },
    {
      "parameters": {
        "jsCode": "// Validar JWT SEM crypto - apenas verificar estrutura\nconst headers = $json.headers || {};\nconst auth = headers.authorization || headers.Authorization || '';\n\nif (!auth.startsWith('Bearer ')) {\n  return [{\n    json: {\n      autenticado: false,\n      erro: 'TOKEN_NAO_FORNECIDO'\n    }\n  }];\n}\n\nconst token = auth.slice(7).trim();\nconst parts = token.split('.');\n\nif (parts.length !== 3) {\n  return [{\n    json: {\n      autenticado: false,\n      erro: 'TOKEN_INVALIDO'\n    }\n  }];\n}\n\n// Decodificar payload (sem validar assinatura aqui)\ntry {\n  const payloadB64 = parts[1].replace(/-/g, '+').replace(/_/g, '/');\n  const padded = payloadB64 + '='.repeat((4 - payloadB64.length % 4) % 4);\n  const payload = JSON.parse(Buffer.from(padded, 'base64').toString('utf8'));\n  \n  return [{\n    json: {\n      autenticado: true,\n      usuario: {\n        id: payload.sub,\n        email: payload.email,\n        tenant_id: payload.tenant_id,\n        role: payload.role\n      },\n      token_completo: token\n    }\n  }];\n} catch (e) {\n  return [{\n    json: {\n      autenticado: false,\n      erro: 'PAYLOAD_INVALIDO'\n    }\n  }];\n}\n"
      },
      "id": "33200c92-0509-471a-808f-a8e1309ae558",
      "name": "Middleware Auth Simples",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -1408,
        1280
      ]
    },
    {
      "parameters": {
        "conditions": {
          "boolean": [
            {
              "value1": "={{ $json.autenticado }}",
              "value2": true
            }
          ]
        }
      },
      "id": "12b78a12-cffc-4636-85ec-fe09bdc7dac8",
      "name": "Autenticado?",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        -1216,
        1280
      ]
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ {erro: 'NAO_AUTORIZADO', mensagem: 'Token inválido ou não fornecido'} }}",
        "options": {}
      },
      "id": "160f82cf-c26a-4387-bcae-56d0b2ba53dd",
      "name": "Response Auth Error",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1,
      "position": [
        -1008,
        1424
      ]
    },
    {
      "parameters": {
        "jsCode": "const body = $items('Webhook Criar Cliente')[0].json.body || {};\nconst errors = [];\n\nif (!body.nome_completo || body.nome_completo.trim().length < 3) {\n  errors.push('nome_completo é obrigatório');\n}\n\nif (body.cpf) {\n  const cpfLimpo = String(body.cpf).replace(/\\D/g, '');\n  if (cpfLimpo.length !== 11) {\n    errors.push('CPF deve ter 11 dígitos');\n  }\n}\n\nreturn [{\n  json: {\n    valido: errors.length === 0,\n    erro: errors.length ? 'Validação falhou' : null,\n    detalhes: errors,\n    dados: body\n  }\n}];\n"
      },
      "id": "27bfc493-deb7-4801-85d3-575b7514796f",
      "name": "Validar Input Cliente",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -1008,
        1184
      ]
    },
    {
      "parameters": {
        "jsCode": "const body = $items('Validar Input Cliente')[0].json.dados;\nconst usuario = $items('Middleware Auth Simples')[0].json.usuario;\n\nreturn [{\n  json: {\n    tenant_id: usuario.tenant_id,\n    nome_completo: body.nome_completo,\n    cpf: String(body.cpf || '').replace(/\\D/g, ''),\n    whatsapp: body.whatsapp || null,\n    email: body.email || null,\n    cep: body.cep || null,\n    endereco: body.endereco || null,\n    complemento: body.complemento || null,\n    bairro: body.bairro || null,\n    cidade: body.cidade || null,\n    estado: body.estado || null,\n    data_nascimento: body.data_nascimento || null\n  }\n}];\n"
      },
      "id": "9e3f3e16-5efd-44a1-834c-28626a2e23b9",
      "name": "Preparar Dados",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -608,
        1072
      ]
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "INSERT INTO public.clientes (\n  id, tenant_id, nome_completo, cpf, whatsapp, email,\n  cep, endereco, complemento, bairro, cidade, estado, data_nascimento\n)\nVALUES (\n  gen_random_uuid(), $1::uuid, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12\n)\nON CONFLICT (tenant_id, cpf)\nDO UPDATE SET\n  nome_completo = EXCLUDED.nome_completo,\n  whatsapp = EXCLUDED.whatsapp,\n  email = EXCLUDED.email,\n  updated_at = NOW()\nRETURNING *;",
        "options": {
          "queryReplacement": "={{ $json.tenant_id }}\n={{ $json.nome_completo }}\n={{ $json.cpf }}\n={{ $json.whatsapp }}\n={{ $json.email }}\n={{ $json.cep }}\n={{ $json.endereco }}\n={{ $json.complemento }}\n={{ $json.bairro }}\n={{ $json.cidade }}\n={{ $json.estado }}\n={{ $json.data_nascimento }}"
        }
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        -400,
        1072
      ],
      "id": "1a925bf6-cfed-44c3-b234-dfed587d56bd",
      "name": "Inserir Cliente",
      "credentials": {
        "postgres": {
          "id": "ISeq8ovLtFz7Vb1t",
          "name": "Postgres CredGestor"
        }
      }
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ {sucesso: true, cliente: $json, timestamp: new Date().toISOString()} }}",
        "options": {}
      },
      "id": "73912eb0-cee6-42c7-8670-5c081f587308",
      "name": "Response Cliente Success",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1,
      "position": [
        -208,
        1072
      ]
    },
    {
      "parameters": {
        "conditions": {
          "boolean": [
            {
              "value1": "={{ $json.valido }}",
              "value2": true
            }
          ]
        }
      },
      "id": "fff881a4-469f-4021-be21-2eb8093b3dee",
      "name": "Input Válido?1",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        -816,
        1184
      ]
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ $json }}",
        "options": {}
      },
      "id": "1cd080ed-986e-4f69-a36f-6168ed41c6b0",
      "name": "Response Validation Error1",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1,
      "position": [
        -608,
        1328
      ]
    },
    {
      "parameters": {
        "content": "## Cadastro cliente\n\n**Double click** to edit me. [Guide](https://docs.n8n.io/workflows/sticky-notes/)",
        "height": 704,
        "width": 1920,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -1712,
        880
      ],
      "id": "f497d94e-197c-4fd0-81a9-4f131c16a77b",
      "name": "Sticky Note1"
    }
  ],
  "pinData": {},
  "repo_name": "backup-n8n",
  "repo_owner": "faelsou",
  "repo_path": "backups",
  "settings": {
    "executionOrder": "v1"
  },
  "shared": [
    {
      "createdAt": "2025-12-29T18:46:22.712Z",
      "updatedAt": "2025-12-29T18:46:22.712Z",
      "role": "workflow:owner",
      "workflowId": "kn4R5u4cwcW9mh5t",
      "projectId": "uxvBhUmI1Fx6jdU7"
    }
  ],
  "staticData": null,
  "tags": [],
  "triggerCount": 2,
  "updatedAt": "2025-12-30T00:48:40.268Z",
  "versionId": "5edb1408-1005-4c21-8221-93ecf5dd0f02"
}