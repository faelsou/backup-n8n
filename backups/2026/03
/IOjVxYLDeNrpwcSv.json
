{
  "active": false,
  "connections": {
    "Verifica√ß√£o Peri√≥dica": {
      "main": [
        [
          {
            "node": "Health Check API",
            "type": "main",
            "index": 0
          },
          {
            "node": "Verificar M√©tricas",
            "type": "main",
            "index": 0
          },
          {
            "node": "Health Check Frontend",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Health Check API": {
      "main": [
        [
          {
            "node": "Agregar Resultados",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Verificar M√©tricas": {
      "main": [
        [
          {
            "node": "Agregar Resultados",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Health Check Frontend": {
      "main": [
        [
          {
            "node": "Agregar Resultados",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Agregar Resultados": {
      "main": [
        [
          {
            "node": "Verificar Problemas",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Verificar Problemas": {
      "main": [
        [
          {
            "node": "Rotear para Especialistas",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Resumo Execu√ß√£o",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Rotear para Especialistas": {
      "main": [
        [
          {
            "node": "Rotear Infra",
            "type": "main",
            "index": 0
          },
          {
            "node": "Rotear Dev",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Rotear Infra": {
      "main": [
        [
          {
            "node": "Preparar Prompt Infra",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Rotear Dev": {
      "main": [
        [
          {
            "node": "Preparar Prompt Dev",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Preparar Prompt Infra": {
      "main": [
        [
          {
            "node": "An√°lise Especialista Infra",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Preparar Prompt Dev": {
      "main": [
        [
          {
            "node": "An√°lise Especialista Dev",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "An√°lise Especialista Infra": {
      "main": [
        [
          {
            "node": "Processar An√°lise",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "An√°lise Especialista Dev": {
      "main": [
        [
          {
            "node": "Processar An√°lise",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Processar An√°lise": {
      "main": [
        [
          {
            "node": "Salvar Relat√≥rio",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Salvar Relat√≥rio": {
      "main": [
        [
          {
            "node": "Formatar Mensagem Aprova√ß√£o",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Formatar Mensagem Aprova√ß√£o": {
      "main": [
        [
          {
            "node": "Enviar Slack",
            "type": "main",
            "index": 0
          },
          {
            "node": "Enviar Email Gmail",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Enviar Slack": {
      "main": [
        [
          {
            "node": "Resumo Execu√ß√£o",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Enviar Email Gmail": {
      "main": [
        [
          {
            "node": "Resumo Execu√ß√£o",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "createdAt": "2026-01-22T07:19:27.180Z",
  "id": "IOjVxYLDeNrpwcSv",
  "isArchived": false,
  "meta": null,
  "name": "CredGestor - Monitoramento e Troubleshooting Automatizado",
  "nodes": [
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "cronExpression",
              "expression": "*/15 * * * *"
            }
          ]
        }
      },
      "id": "cc393c89-7dbe-4710-a5ea-27ce9d6c24b2",
      "name": "Verifica√ß√£o Peri√≥dica",
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.1,
      "position": [
        -1168,
        144
      ],
      "notes": "Executa a cada 15 minutos para verificar a sa√∫de da aplica√ß√£o"
    },
    {
      "parameters": {
        "url": "=https://credgestor.app.br/api/health",
        "options": {
          "redirect": {},
          "timeout": 10000
        }
      },
      "id": "9205115b-cf3b-488b-aa99-fbbc83a26e4f",
      "name": "Health Check API",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -880,
        -32
      ]
    },
    {
      "parameters": {
        "url": "=https://credgestor.app.br/api/metrics",
        "options": {
          "timeout": 10000
        }
      },
      "id": "1a259236-0513-4de6-a45a-c203d3add69c",
      "name": "Verificar M√©tricas",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -880,
        144
      ]
    },
    {
      "parameters": {
        "url": "=https://credgestor.app.br",
        "options": {
          "timeout": 10000
        }
      },
      "id": "d55fc5a0-5d90-486c-9f66-24ceb2f2505e",
      "name": "Health Check Frontend",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -880,
        320
      ]
    },
    {
      "parameters": {
        "jsCode": "// Agregar resultados de todas as verifica√ß√µes\nconst healthApi = $('Health Check API').item.json;\nconst metrics = $('Verificar M√©tricas').item.json;\nconst frontend = $('Frontend Check').item.json;\n\nconst timestamp = new Date().toISOString();\n\n// Analisar status da API\nconst apiStatus = {\n  status: healthApi.statusCode === 200 ? 'healthy' : 'unhealthy',\n  statusCode: healthApi.statusCode,\n  response: healthApi.body || healthApi.data || {},\n  timestamp: timestamp\n};\n\n// Analisar m√©tricas\nlet metricsData = {};\nif (metrics.statusCode === 200) {\n  const metricsText = typeof metrics.body === 'string' ? metrics.body : JSON.stringify(metrics.body);\n  // Extrair m√©tricas importantes\n  const httpRequestsMatch = metricsText.match(/http_requests_total\\{.*?\\} (\\d+)/g);\n  const httpDurationMatch = metricsText.match(/http_request_duration_seconds_bucket\\{.*?\\} ([\\d.]+)/g);\n  \n  metricsData = {\n    status: 'available',\n    hasData: true,\n    raw: metricsText.substring(0, 1000) // Primeiros 1000 caracteres\n  };\n} else {\n  metricsData = {\n    status: 'unavailable',\n    hasData: false\n  };\n}\n\n// Analisar frontend\nconst frontendStatus = {\n  status: frontend.statusCode === 200 ? 'healthy' : 'unhealthy',\n  statusCode: frontend.statusCode,\n  timestamp: timestamp\n};\n\n// Determinar se h√° problemas\nconst issues = [];\nif (apiStatus.status === 'unhealthy') {\n  issues.push({\n    type: 'api',\n    severity: 'critical',\n    message: `API retornou status ${apiStatus.statusCode}`,\n    component: 'backend'\n  });\n}\n\nif (metricsData.status === 'unavailable') {\n  issues.push({\n    type: 'metrics',\n    severity: 'warning',\n    message: 'M√©tricas n√£o est√£o dispon√≠veis',\n    component: 'monitoring'\n  });\n}\n\nif (frontendStatus.status === 'unhealthy') {\n  issues.push({\n    type: 'frontend',\n    severity: 'critical',\n    message: `Frontend retornou status ${frontendStatus.statusCode}`,\n    component: 'frontend'\n  });\n}\n\nreturn [{\n  json: {\n    timestamp: timestamp,\n    api: apiStatus,\n    metrics: metricsData,\n    frontend: frontendStatus,\n    issues: issues,\n    hasIssues: issues.length > 0,\n    issueCount: issues.length\n  }\n}];"
      },
      "id": "40e126d7-8ef6-4be6-aab6-f1f401199405",
      "name": "Agregar Resultados",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -656,
        144
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "has-issues",
              "leftValue": "={{ $json.hasIssues }}",
              "rightValue": true,
              "operator": {
                "type": "boolean",
                "operation": "true"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "f476122a-c375-4e90-a368-aa019193d410",
      "name": "Verificar Problemas",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [
        -448,
        144
      ]
    },
    {
      "parameters": {
        "jsCode": "// Separar problemas por tipo para an√°lise especializada\nconst data = $input.item.json;\nconst issues = data.issues || [];\n\nconst infraIssues = issues.filter(i => \n  i.type === 'api' || \n  i.component === 'backend' || \n  i.component === 'monitoring'\n);\n\nconst devIssues = issues.filter(i => \n  i.type === 'frontend' || \n  (i.type === 'api' && i.message.includes('code') || i.message.includes('error'))\n);\n\nconst results = [];\n\n// Se houver problemas de infra\nif (infraIssues.length > 0) {\n  results.push({\n    json: {\n      specialist: 'infra',\n      issues: infraIssues,\n      context: {\n        api: data.api,\n        metrics: data.metrics,\n        timestamp: data.timestamp\n      },\n      requiresAnalysis: true\n    }\n  });\n}\n\n// Se houver problemas de desenvolvimento\nif (devIssues.length > 0) {\n  results.push({\n    json: {\n      specialist: 'developer',\n      issues: devIssues,\n      context: {\n        frontend: data.frontend,\n        api: data.api,\n        timestamp: data.timestamp\n      },\n      requiresAnalysis: true\n    }\n  });\n}\n\n// Se n√£o houver problemas espec√≠ficos mas houver algum problema geral\nif (results.length === 0 && issues.length > 0) {\n  results.push({\n    json: {\n      specialist: 'infra',\n      issues: issues,\n      context: data,\n      requiresAnalysis: true\n    }\n  });\n}\n\nreturn results.length > 0 ? results : [{ json: { skip: true, message: 'Nenhum problema detectado' } }];"
      },
      "id": "fc8bfae1-42ad-45ea-ad31-7d9a0ed957e8",
      "name": "Rotear para Especialistas",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -208,
        80
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "is-infra",
              "leftValue": "={{ $json.specialist }}",
              "rightValue": "infra",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "5fe6774b-023b-43cf-a8b9-935da1e12ec5",
      "name": "Rotear Infra",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [
        -48,
        -160
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "is-dev",
              "leftValue": "={{ $json.specialist }}",
              "rightValue": "developer",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "ce2356ae-b33c-4204-9547-d2c7e1f55a4e",
      "name": "Rotear Dev",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [
        -64,
        240
      ]
    },
    {
      "parameters": {
        "jsCode": "// Preparar prompt para Claude AI\nconst data = $input.item.json;\nconst promptTemplate = $env.PROMPT_INFRA_SPECIALIST || '';\n\n// Substituir placeholders no prompt\nlet prompt = promptTemplate\n  .replace(/\\{\\{issues\\}\\}/g, JSON.stringify(data.issues, null, 2))\n  .replace(/\\{\\{context\\}\\}/g, JSON.stringify(data.context, null, 2));\n\nreturn [{\n  json: {\n    ...data,\n    prompt: prompt,\n    model: $env.LLM_MODEL || 'claude-3-5-sonnet-20241022'\n  }\n}];"
      },
      "id": "2262a977-fc02-4d6d-a557-2317f6071b90",
      "name": "Preparar Prompt Infra",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        144,
        -176
      ]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=https://api.anthropic.com/v1/messages",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            },
            {
              "name": "x-api-key",
              "value": "={{ $env.ANTHROPIC_API_KEY }}"
            },
            {
              "name": "anthropic-version",
              "value": "2023-06-01"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {}
          ]
        },
        "options": {}
      },
      "id": "dcefa492-cbe2-4f5e-b300-e1a737989b04",
      "name": "An√°lise Especialista Infra",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        320,
        -176
      ],
      "notes": "Usa Claude AI via HTTP Request. Configure PROMPT_INFRA_SPECIALIST e ANTHROPIC_API_KEY nas vari√°veis de ambiente."
    },
    {
      "parameters": {
        "jsCode": "// Preparar prompt para Claude AI\nconst data = $input.item.json;\nconst promptTemplate = $env.PROMPT_DEV_SPECIALIST || '';\n\n// Substituir placeholders no prompt\nlet prompt = promptTemplate\n  .replace(/\\{\\{issues\\}\\}/g, JSON.stringify(data.issues, null, 2))\n  .replace(/\\{\\{context\\}\\}/g, JSON.stringify(data.context, null, 2));\n\nreturn [{\n  json: {\n    ...data,\n    prompt: prompt,\n    model: $env.LLM_MODEL || 'claude-3-5-sonnet-20241022'\n  }\n}];"
      },
      "id": "963cb4c2-0e02-4b0d-b714-e344831f7c76",
      "name": "Preparar Prompt Dev",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        144,
        224
      ]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=https://api.anthropic.com/v1/messages",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            },
            {
              "name": "x-api-key",
              "value": "={{ $env.ANTHROPIC_API_KEY }}"
            },
            {
              "name": "anthropic-version",
              "value": "2023-06-01"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {}
          ]
        },
        "options": {}
      },
      "id": "c247aaa1-67bc-4dd1-af3f-71274fa4c609",
      "name": "An√°lise Especialista Dev",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        304,
        224
      ],
      "notes": "Usa Claude AI via HTTP Request. Configure PROMPT_DEV_SPECIALIST e ANTHROPIC_API_KEY nas vari√°veis de ambiente."
    },
    {
      "parameters": {
        "jsCode": "// Processar resposta do LLM e extrair diagn√≥stico e plano de a√ß√£o\nconst llmResponse = $input.item.json;\n\n// Determinar qual especialista chamou (infra ou dev)\nlet originalData;\ntry {\n  originalData = $('Rotear para Especialistas').item.json;\n} catch (e) {\n  // Se n√£o conseguir, tentar pegar do n√≥ anterior\n  try {\n    originalData = $('Preparar Prompt Infra').item.json;\n  } catch (e2) {\n    originalData = $('Preparar Prompt Dev').item.json;\n  }\n}\n\n// Extrair texto da resposta do LLM (formato Anthropic API via HTTP Request)\nlet analysisText = '';\n\n// HTTP Request retorna body como string ou objeto\nlet responseBody = llmResponse.body || llmResponse;\nif (typeof responseBody === 'string') {\n  try {\n    responseBody = JSON.parse(responseBody);\n  } catch (e) {\n    responseBody = { content: [{ type: 'text', text: responseBody }] };\n  }\n}\n\n// Extrair conte√∫do da resposta Anthropic\nif (responseBody.content && Array.isArray(responseBody.content)) {\n  const textContent = responseBody.content.find(c => c.type === 'text');\n  analysisText = textContent ? textContent.text : JSON.stringify(responseBody.content);\n} else if (responseBody.text) {\n  analysisText = responseBody.text;\n} else if (responseBody.message) {\n  analysisText = responseBody.message.content || responseBody.message;\n} else {\n  analysisText = JSON.stringify(responseBody);\n}\n\n// Tentar extrair JSON estruturado se presente\nlet diagnosis = {};\nlet actionPlan = [];\nlet requiresApproval = false;\nlet severity = 'medium';\n\ntry {\n  // Tentar encontrar JSON na resposta\n  const jsonMatch = analysisText.match(/\\{[\\s\\S]*\\}/);\n  if (jsonMatch) {\n    const parsed = JSON.parse(jsonMatch[0]);\n    diagnosis = parsed.diagnosis || parsed.analysis || {};\n    actionPlan = parsed.actionPlan || parsed.actions || [];\n    requiresApproval = parsed.requiresApproval !== false;\n    severity = parsed.severity || severity;\n  } else {\n    // Se n√£o houver JSON, criar estrutura a partir do texto\n    diagnosis = {\n      summary: analysisText.substring(0, 500),\n      rootCause: 'A ser determinado pela an√°lise completa',\n      impact: 'M√©dio'\n    };\n    \n    // Extrair a√ß√µes do texto\n    const actionMatches = analysisText.match(/\\d+\\.\\s*([^\\n]+)/g);\n    if (actionMatches) {\n      actionPlan = actionMatches.map((match, idx) => ({\n        id: idx + 1,\n        description: match.replace(/^\\d+\\.\\s*/, ''),\n        type: 'manual',\n        requiresApproval: true\n      }));\n    }\n    \n    requiresApproval = true;\n  }\n} catch (e) {\n  // Se falhar, usar texto completo\n  diagnosis = {\n    summary: analysisText,\n    error: 'N√£o foi poss√≠vel parsear resposta estruturada'\n  };\n  actionPlan = [{\n    id: 1,\n    description: 'Revisar an√°lise manualmente',\n    type: 'manual',\n    requiresApproval: true\n  }];\n}\n\n// Determinar se h√° a√ß√µes que requerem execu√ß√£o\nconst executableActions = actionPlan.filter(a => \n  a.type === 'automated' || \n  a.type === 'script' || \n  (a.commands && a.commands.length > 0)\n);\n\nreturn [{\n  json: {\n    specialist: originalData.specialist,\n    timestamp: new Date().toISOString(),\n    issues: originalData.issues,\n    diagnosis: diagnosis,\n    actionPlan: actionPlan,\n    executableActions: executableActions,\n    requiresApproval: requiresApproval || executableActions.length > 0,\n    severity: severity,\n    rawAnalysis: analysisText.substring(0, 2000), // Limitar tamanho\n    context: originalData.context\n  }\n}];"
      },
      "id": "09233872-2a21-4184-8f59-111be7ea58cc",
      "name": "Processar An√°lise",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        480,
        16
      ]
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "=INSERT INTO troubleshooting_reports (\n  id,\n  timestamp,\n  specialist_type,\n  issues,\n  diagnosis,\n  action_plan,\n  severity,\n  status,\n  created_at\n) VALUES (\n  gen_random_uuid(),\n  '{{ $json.timestamp }}',\n  '{{ $json.specialist }}',\n  '{{ JSON.stringify($json.issues) }}'::jsonb,\n  '{{ JSON.stringify($json.diagnosis) }}'::jsonb,\n  '{{ JSON.stringify($json.actionPlan) }}'::jsonb,\n  '{{ $json.severity }}',\n  'pending_approval',\n  NOW()\n) RETURNING id, timestamp, status;",
        "options": {}
      },
      "id": "5e8f584b-3397-4248-b75f-32ad74ff222b",
      "name": "Salvar Relat√≥rio",
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.4,
      "position": [
        688,
        16
      ],
      "notes": "Salva o relat√≥rio no banco de dados. A tabela troubleshooting_reports deve existir."
    },
    {
      "parameters": {
        "jsCode": "// Formatar mensagem para aprova√ß√£o\nconst report = $input.item.json;\nconst savedReport = $('Salvar Relat√≥rio').item.json;\n\nconst severityEmoji = {\n  'critical': 'üî¥',\n  'high': 'üü†',\n  'medium': 'üü°',\n  'low': 'üü¢'\n}[report.severity] || '‚ö™';\n\nlet message = `${severityEmoji} *ALERTA: Problema Detectado no CredGestor*\\n\\n`;\nmessage += `*Especialista:* ${report.specialist === 'infra' ? 'Infraestrutura' : 'Desenvolvimento'}\\n`;\nmessage += `*Severidade:* ${report.severity.toUpperCase()}\\n`;\nmessage += `*Data/Hora:* ${new Date(report.timestamp).toLocaleString('pt-BR')}\\n\\n`;\n\nmessage += `*üìã PROBLEMAS DETECTADOS:*\\n`;\nfor (const issue of report.issues) {\n  message += `‚Ä¢ ${issue.type}: ${issue.message}\\n`;\n}\n\nmessage += `\\n*üîç DIAGN√ìSTICO:*\\n`;\nif (report.diagnosis.summary) {\n  message += `${report.diagnosis.summary.substring(0, 300)}...\\n`;\n}\n\nmessage += `\\n*üìù PLANO DE A√á√ÉO:*\\n`;\nfor (let i = 0; i < Math.min(report.actionPlan.length, 5); i++) {\n  const action = report.actionPlan[i];\n  message += `${i + 1}. ${action.description}\\n`;\n}\nif (report.actionPlan.length > 5) {\n  message += `... e mais ${report.actionPlan.length - 5} a√ß√µes\\n`;\n}\n\nmessage += `\\n*‚ö†Ô∏è A√á√ïES REQUEREM APROVA√á√ÉO*\\n`;\nmessage += `ID do Relat√≥rio: ${savedReport.id || 'N/A'}\\n\\n`;\n\nmessage += `*Para aprovar e executar:*\\n`;\nmessage += `Responda: APROVAR ${savedReport.id || 'REPORT_ID'}\\n\\n`;\nmessage += `*Para rejeitar:*\\n`;\nmessage += `Responda: REJEITAR ${savedReport.id || 'REPORT_ID'}\\n`;\n\nreturn [{\n  json: {\n    message: message,\n    reportId: savedReport.id,\n    report: report,\n    channel: '#credgestor-alerts',\n    thread_ts: null\n  }\n}];"
      },
      "id": "9243c24a-ce1f-4165-b3eb-79b98e7306f1",
      "name": "Formatar Mensagem Aprova√ß√£o",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        864,
        16
      ]
    },
    {
      "parameters": {
        "text": "={{ $json.message }}",
        "otherOptions": {}
      },
      "id": "841acf09-4210-41ec-8fd0-bd7887ea49b9",
      "name": "Enviar Slack",
      "type": "n8n-nodes-base.slack",
      "typeVersion": 2.1,
      "position": [
        1056,
        -64
      ],
      "webhookId": "11f38a7e-98a6-4133-9b2a-4d6942540cf3"
    },
    {
      "parameters": {
        "fromEmail": "={{ $env.ALERT_EMAIL_FROM || 'noreply@credgestor.app.br' }}",
        "toEmail": "={{ $env.ALERT_EMAIL_TO || 'admin@credgestor.app.br' }}",
        "subject": "={{ 'üö® Alerta CredGestor - ' + $json.report.severity.toUpperCase() + ' - ' + new Date($json.report.timestamp).toLocaleString('pt-BR') }}",
        "options": {}
      },
      "id": "390dd94e-7cf7-460f-90c1-07ff32db8f82",
      "name": "Enviar Email Gmail",
      "type": "n8n-nodes-base.emailSend",
      "typeVersion": 2.1,
      "position": [
        1088,
        256
      ],
      "webhookId": "5b330bff-dff5-4e79-9e88-171bc71ce6c3"
    },
    {
      "parameters": {
        "jsCode": "// Resumo final da execu√ß√£o\nconst report = $('Processar An√°lise').item.json;\nconst savedReport = $('Salvar Relat√≥rio').item.json;\n\nreturn [{\n  json: {\n    executionTime: new Date().toISOString(),\n    reportId: savedReport.id,\n    specialist: report.specialist,\n    issuesFound: report.issues.length,\n    severity: report.severity,\n    actionsGenerated: report.actionPlan.length,\n    requiresApproval: report.requiresApproval,\n    status: 'completed'\n  }\n}];"
      },
      "id": "ed74ed49-0deb-448a-9295-c047a5299841",
      "name": "Resumo Execu√ß√£o",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1328,
        144
      ]
    }
  ],
  "pinData": {},
  "repo_name": "backup-n8n",
  "repo_owner": "faelsou",
  "repo_path": "backups",
  "settings": {
    "executionOrder": "v1"
  },
  "shared": [
    {
      "createdAt": "2026-01-22T07:19:27.180Z",
      "updatedAt": "2026-01-22T07:19:27.180Z",
      "role": "workflow:owner",
      "workflowId": "IOjVxYLDeNrpwcSv",
      "projectId": "uxvBhUmI1Fx6jdU7"
    }
  ],
  "staticData": null,
  "tags": [],
  "triggerCount": 0,
  "updatedAt": "2026-01-22T07:19:27.180Z",
  "versionId": "562229cd-ef38-44ad-9cb1-247301b57b30"
}